# Contributor:
# Maintainer:
pkgname=qwt
pkgver=6.1.3
pkgrel=0
pkgdesc="Qt Widgets for Technical Applications"
url="http://qwt.sourceforge.net/"
arch="all"
license="Qwt1.0"
depends=""
makedepends="qt5-qtbase-dev qt5-qtsvg-dev qt5-qttools-dev"
install=""
subpackages="$pkgname-dev $pkgname-doc"
source="http://downloads.sourceforge.net/qwt/qwt/qwt-$pkgver.zip
       qwtconfig.pri"
_builddir="$srcdir/$pkgname-$pkgver"

build() {
  cd "$_builddir"
  cp "$srcdir/qwtconfig.pri" .
  qmake-qt5 qwt.pro || exit 1
  make
}

package() {
	cd "$_builddir"
   make INSTALL_ROOT=${pkgdir} install

   # install web designer plugin
   install -d ${pkgdir}/usr/lib/qt4/plugins/designer/
   install -Dm755 designer/plugins/designer/libqwt_designer_plugin.so \
     ${pkgdir}/usr/lib/qt4/plugins/designer/

   # needed by qmake (FS#30407)
   install -d "${pkgdir}"/usr/share/qt4/mkspecs/features/
   install -m644 qwtconfig.pri qwt.prf qwtfunctions.pri \
     "${pkgdir}"/usr/share/qt4/mkspecs/features/
 
   # install licence
   install -Dm644 ${srcdir}/${pkgname}-${pkgver}/COPYING \
   	${pkgdir}/usr/share/licenses/${pkgname}/LICENSE
}

sha512sums="8f249e23d50f71d14fca37776ea40d8d6931db14d9602e03a343bfb7a9bf55502202103135b77f583c3890a7924220e8a142a01c448dbde311860d89a3b10fc8  qwt-6.1.3.zip
fa7eea61f7136d8b433935473759d2d4f3e678dd5e5b4368ca585a8bbf45eb8910136538406432613f79febe637fb11cbf6a9c29027cc8f17ea3c53b6096fc01  qwtconfig.pri"
